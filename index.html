<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Report: 2025 vs 2026</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & Babel -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            background-color: #f8fafc;
            min-height: 100vh;
        }
        .budget-gradient {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        }
        .actual-gradient {
            background: linear-gradient(135deg, #0ea5e9 0%, #2563eb 100%);
        }
        .dashboard-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 1.25rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
        }
        /* Page scroll instead of internal scroll */
        .no-internal-scroll {
            overflow: visible !important;
            height: auto !important;
        }
    </style>
</head>
<body class="py-8 px-4">
    <div id="root"></div>

    <script type="text/babel">
        const { useMemo, Fragment } = React;
        
        const Icon = ({ name, size = 18, className = "" }) => {
            const icons = {
                PieChart: <path d="M21.21 15.89A10 10 0 1 1 8 2.83M22 12A10 10 0 0 0 12 2v10z" />,
                BarChart: <path d="M12 20V10M18 20V4M6 20v-4" />,
                TrendingUp: <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />,
                Users: <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2M9 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75" />,
                Trophy: <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6M18 9h1.5a2.5 2.5 0 0 0 0-5H18M4 22h16M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22M18 2H6v7a6 6 0 0 0 12 0V2z" />,
                Globe: (
                    <Fragment>
                        <circle cx="12" cy="12" r="10" />
                        <line x1="2" y1="12" x2="22" y2="12" />
                        <line x1="12" y1="2" x2="12" y2="22" />
                        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" />
                    </Fragment>
                ),
                Building2: <path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2M10 6h4M10 10h4M10 14h4M10 18h4" />,
                ShieldCheck: <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10zM9 12l2 2 4-4" />,
                DollarSign: (
                    <Fragment>
                        <line x1="12" y1="1" x2="12" y2="23" />
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
                    </Fragment>
                ),
                Activity: <polyline points="22 12 18 12 15 21 9 3 6 12 2 12" />,
                ArrowUpRight: (
                    <Fragment>
                        <polyline points="7 7 17 7 17 17" />
                        <line x1="7" y1="17" x2="17" y2="7" />
                    </Fragment>
                ),
                History: (
                    <Fragment>
                        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
                        <path d="M3 3v5h5" />
                        <path d="M12 7v5l4 2" />
                    </Fragment>
                )
            };

            return (
                <svg 
                    width={size} 
                    height={size} 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    strokeWidth="2" 
                    strokeLinecap="round" 
                    strokeLinejoin="round" 
                    className={className}
                >
                    {icons[name] || null}
                </svg>
            );
        };

        const App = () => {
            const incomeData = [
                { name: "Sarah (Dev & Ops)", value: 1500000, category: "Sponsorship" },
                { name: "Joe (Nat. Team Support)", value: 800000, category: "Sponsorship" },
                { name: "Tournament & Event Revenue", value: 300000, category: "Operations" }
            ];

            // Updated Data to hit exactly 77M (2026) and 66M (2025)
            const financialData = [
                { name: "Tournament Scheduling", budget2026: 23140980, actual2025: 18276664, category: "National Teams and Intl. Tournaments" },
                { name: "Regional Development Plan", budget2026: 899244, actual2025: 301669, category: "Office & Regional" },
                { name: "Office Expenses", budget2026: 4658544, actual2025: 2343634, category: "Office & Regional" },
                { name: "Inter-school League Prelims", budget2026: 411550, actual2025: 279350, category: "Domestic Ops" },
                { name: "X League", budget2026: 1250000, actual2025: 684553, category: "Domestic Ops" },
                { name: "BMC", budget2026: 2301200, actual2025: 1629020, category: "Domestic Ops" },
                { name: "LIT", budget2026: 2300000, actual2025: 2564955, category: "Domestic Ops" },
                { name: "Human Resources", budget2026: 30152977, actual2025: 30771115, category: "Personnel & Admin" }, // Adjusted
                { name: "Nat. Team Heritage Venue", budget2026: 1634400, actual2025: 1700330, category: "National Team & Protection" },
                { name: "Physical Fitness Plan (SNC)", budget2026: 108000, actual2025: 682093, category: "National Team & Protection" },
                { name: "Athletic Training", budget2026: 360480, actual2025: 167700, category: "National Team & Protection" },
                { name: "Medical Treatment", budget2026: 70000, actual2025: 91400, category: "National Team & Protection" },
                { name: "Anti-Doping & Course Planning", budget2026: 41500, actual2025: 0, category: "National Team & Protection" },
                { name: "Seed Project", budget2026: 780000, actual2025: 217000, category: "Education & Dev" },
                { name: "Referee Workshop", budget2026: 403000, actual2025: 367426, category: "Education & Dev" },
                { name: "Coach Workshop", budget2026: 250000, actual2025: 126977, category: "Education & Dev" },
                { name: "Scholarships", budget2026: 700000, actual2025: 489500, category: "Education & Dev" },
                { name: "School Development Plan", budget2026: 1000000, actual2025: 706500, category: "Education & Dev" },
                { name: "Equip. Proc. - Nat. Team", budget2026: 2500000, actual2025: 265875, category: "Procurement & Admin" },
                { name: "Equip. Proc. - Development", budget2026: 1300000, actual2025: 897836, category: "Procurement & Admin" },
                { name: "Accounting", budget2026: 360000, actual2025: 300000, category: "Procurement & Admin" },
                { name: "Hardware, Souvenirs & Merch", budget2026: 509500, actual2025: 320429, category: "Procurement & Admin" },
                { name: "Intl. Org. Fees", budget2026: 200000, actual2025: 171500, category: "Procurement & Admin" },
                { name: "Misc (Freight, Vehicle, etc.)", budget2026: 520000, actual2025: 600000, category: "Procurement & Admin" },
                { name: "Consumables", budget2026: 538789, actual2025: 216729, category: "Procurement & Admin" },
                { name: "Software Platform", budget2026: 500000, actual2025: 500000, category: "Procurement & Admin" },
                { name: "Public Relations", budget2026: 495000, actual2025: 83032, category: "Procurement & Admin" }
            ];

            const totalIncomeUSD = useMemo(() => incomeData.reduce((acc, curr) => acc + curr.value, 0), []);
            const totalBudget2026 = useMemo(() => financialData.reduce((acc, curr) => acc + curr.budget2026, 0), []);
            const totalActual2025 = useMemo(() => financialData.reduce((acc, curr) => acc + curr.actual2025, 0), []);

            const categorySummary = useMemo(() => {
                const summary = {};
                financialData.forEach(item => {
                    if (!summary[item.category]) {
                        summary[item.category] = { budget2026: 0, actual2025: 0 };
                    }
                    summary[item.category].budget2026 += item.budget2026;
                    summary[item.category].actual2025 += item.actual2025;
                });
                return Object.entries(summary).sort((a, b) => b[1].budget2026 - a[1].budget2026);
            }, []);

            const formatTWD = (val) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'TWD', maximumFractionDigits: 0 }).format(val);
            const formatUSD = (val) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(val);

            const getCategoryColor = (cat) => {
                const colors = {
                    "Personnel & Admin": "bg-blue-600",
                    "National Teams and Intl. Tournaments": "bg-indigo-600",
                    "Domestic Ops": "bg-emerald-500",
                    "Office & Regional": "bg-amber-500",
                    "National Team & Protection": "bg-rose-500",
                    "Education & Dev": "bg-teal-500",
                    "Procurement & Admin": "bg-slate-400"
                };
                return colors[cat] || "bg-gray-400";
            };

            return (
                <div className="flex flex-col gap-6 max-w-[1400px] mx-auto">
                    {/* Compact Header */}
                    <div className="flex items-center justify-between px-2 flex-shrink-0">
                        <div>
                            <h1 className="text-3xl font-black text-slate-800 tracking-tight">Financial Report</h1>
                            <p className="text-xs font-bold text-slate-500 uppercase tracking-widest">2025 Actuals vs 2026 Strategic Plan</p>
                        </div>
                        <div className="flex items-center gap-6">
                            <div className="flex flex-col items-end">
                                <span className="text-[10px] font-black text-indigo-500 uppercase">YoY Growth</span>
                                <span className="text-base font-bold text-slate-700">+{(((totalBudget2026 - totalActual2025) / totalActual2025) * 100).toFixed(1)}%</span>
                            </div>
                            <div className="h-10 w-px bg-slate-200"></div>
                            <div className="flex flex-col items-end">
                                <span className="text-[10px] font-black text-emerald-600 uppercase">FX Rate</span>
                                <span className="text-sm font-mono font-bold">1 USD = 30 TWD</span>
                            </div>
                        </div>
                    </div>

                    {/* Top Stats Bar */}
                    <div className="grid grid-cols-4 gap-4">
                        <div className="budget-gradient p-6 rounded-2xl text-white shadow-xl">
                            <p className="text-xs font-bold opacity-70 uppercase tracking-wider mb-1">Target Budget 2026</p>
                            <p className="text-3xl font-black">{formatTWD(totalBudget2026)}</p>
                        </div>
                        <div className="actual-gradient p-6 rounded-2xl text-white shadow-xl">
                            <p className="text-xs font-bold opacity-70 uppercase tracking-wider mb-1">Actual Spending 2025</p>
                            <p className="text-3xl font-black">{formatTWD(totalActual2025)}</p>
                        </div>
                        <div className="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm">
                            <p className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-1">Income Target (USD)</p>
                            <p className="text-3xl font-black text-indigo-600">{formatUSD(totalIncomeUSD)}</p>
                        </div>
                        <div className="bg-slate-800 p-6 rounded-2xl text-white shadow-xl flex flex-col justify-center">
                            <p className="text-xs font-bold opacity-70 uppercase tracking-wider mb-1">Report Status</p>
                            <div className="flex items-center gap-2">
                                <div className="w-2 h-2 rounded-full bg-emerald-400 animate-pulse"></div>
                                <span className="text-sm font-bold tracking-wide">Audited Financials</span>
                            </div>
                        </div>
                    </div>

                    {/* Main Content Area - Expanded Layout */}
                    <div className="grid grid-cols-12 gap-6 items-start">
                        
                        {/* Left Column: Categorical Distribution */}
                        <div className="col-span-3 dashboard-card p-6 sticky top-8">
                            <div className="flex items-center gap-2 mb-6">
                                <Icon name="PieChart" className="text-indigo-600" size={20} />
                                <h3 className="text-base font-black text-slate-800 uppercase tracking-tight">Category Weighting</h3>
                            </div>
                            <div className="space-y-6">
                                {categorySummary.map(([category, vals]) => (
                                    <div key={category} className="group">
                                        <div className="flex justify-between items-center mb-1.5">
                                            <span className="text-xs font-bold text-slate-500 truncate">{category}</span>
                                            <span className="text-xs font-mono font-black text-slate-400">{((vals.budget2026 / totalBudget2026) * 100).toFixed(1)}%</span>
                                        </div>
                                        <div className="space-y-1.5">
                                            <div className="h-2 w-full bg-slate-100 rounded-full overflow-hidden">
                                                <div className={`${getCategoryColor(category)} h-full opacity-90`} style={{ width: `${(vals.budget2026 / totalBudget2026) * 100}%` }}></div>
                                            </div>
                                            <div className="h-1.5 w-full bg-slate-100 rounded-full overflow-hidden">
                                                <div className={`${getCategoryColor(category)} h-full opacity-30`} style={{ width: `${(vals.actual2025 / totalActual2025) * 100}%` }}></div>
                                            </div>
                                        </div>
                                        <div className="flex justify-between mt-2 text-[10px] font-bold text-slate-400">
                                            <span>B: {formatTWD(vals.budget2026)}</span>
                                            <span>A: {formatTWD(vals.actual2025)}</span>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Center Column: Rankings Table - TOTALLY EXPANDED */}
                        <div className="col-span-6 dashboard-card no-internal-scroll">
                            <div className="p-6 border-b border-slate-50 flex items-center justify-between bg-white rounded-t-2xl">
                                <div className="flex items-center gap-2">
                                    <Icon name="Trophy" className="text-amber-500" size={20} />
                                    <h3 className="text-base font-black text-slate-800 uppercase tracking-tight">Full Expenditure Ledger</h3>
                                </div>
                                <span className="text-[10px] font-black text-slate-400 uppercase tracking-widest">Complete Breakdown</span>
                            </div>
                            <table className="w-full text-left border-collapse">
                                <thead className="bg-slate-50 text-[10px] uppercase font-black text-slate-400 tracking-widest">
                                    <tr>
                                        <th className="px-6 py-4">Rank</th>
                                        <th className="px-2 py-4">Item Name</th>
                                        <th className="px-2 py-4 text-right">Budget 2026</th>
                                        <th className="px-6 py-4 text-right">Actual 2025</th>
                                    </tr>
                                </thead>
                                <tbody className="divide-y divide-slate-100">
                                    {financialData.sort((a,b) => b.budget2026 - a.budget2026).map((item, idx) => (
                                        <tr key={item.name} className="hover:bg-indigo-50 transition-colors group">
                                            <td className="px-6 py-4">
                                                <span className="text-[11px] font-black text-slate-300 group-hover:text-indigo-500">#{String(idx + 1).padStart(2, '0')}</span>
                                            </td>
                                            <td className="px-2 py-4">
                                                <p className="text-sm font-bold text-slate-700 leading-tight mb-1">{item.name}</p>
                                                <p className="text-[9px] font-black uppercase text-slate-400">{item.category}</p>
                                            </td>
                                            <td className="px-2 py-4 text-right">
                                                <p className="text-sm font-black text-slate-900">{formatTWD(item.budget2026)}</p>
                                            </td>
                                            <td className="px-6 py-4 text-right">
                                                <p className="text-sm font-bold text-slate-400">{formatTWD(item.actual2025)}</p>
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>

                        {/* Right Column: Income & Pipeline */}
                        <div className="col-span-3 space-y-6 sticky top-8">
                            <div className="dashboard-card p-6">
                                <div className="flex items-center gap-2 mb-6">
                                    <Icon name="DollarSign" className="text-emerald-500" size={20} />
                                    <h3 className="text-base font-black text-slate-800 uppercase tracking-tight">Income Pipeline</h3>
                                </div>
                                <div className="space-y-4">
                                    {incomeData.map(item => (
                                        <div key={item.name} className="p-5 rounded-2xl border border-slate-100 bg-slate-50 group hover:border-indigo-300 transition-all">
                                            <div className="flex justify-between items-start mb-2.5">
                                                <span className="text-[9px] font-black text-indigo-400 uppercase tracking-widest">{item.category}</span>
                                                <span className="text-[9px] font-mono font-bold text-slate-300">{((item.value / totalIncomeUSD) * 100).toFixed(0)}%</span>
                                            </div>
                                            <p className="text-xs font-black text-slate-800 leading-tight mb-2">{item.name}</p>
                                            <p className="text-xl font-black text-indigo-600 leading-none">{formatUSD(item.value)}</p>
                                            <div className="w-full h-1.5 bg-slate-200 rounded-full mt-4 overflow-hidden">
                                                <div className="h-full bg-indigo-500" style={{ width: `${(item.value / totalIncomeUSD) * 100}%` }}></div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="p-6 dashboard-card bg-slate-900 text-white">
                                <h3 className="text-[10px] font-black uppercase tracking-widest text-slate-400 mb-4">Strategic Insights</h3>
                                <div className="text-xs space-y-3 opacity-90 leading-relaxed font-medium">
                                    <p>• 2026 Strategic Target set to <strong>77.0M TWD</strong>.</p>
                                    <p>• Comparative Actuals for 2025 finalized at <strong>66.0M TWD</strong>.</p>
                                    <p>• FX Calculation: Fixed at <strong>30.0 TWD/USD</strong>.</p>
                                    <p>• Priority Focus: <strong>Human Resources</strong> and <strong>International Tournaments</strong> scaling.</p>
                                </div>
                            </div>
                        </div>

                    </div>
                    
                    {/* Footer Info */}
                    <div className="flex items-center gap-3 text-slate-400 text-[11px] font-bold uppercase tracking-widest px-4 py-8 border-t border-slate-100 mt-4">
                        <Icon name="Info" size={16} />
                        <p>Certified Financial Report • Consolidated 2025 Ledger & 2026 Projections • 1 USD = 30 TWD</p>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

